import * as gameHelpers from '../client/helpers/gameHelpers';
const newStage = [
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			"I",
			"merged",
		],
	],
	[
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			"O",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			"T",
			"merged",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			"I",
			"merged",
		],
	],
	[
		[
			"O",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			"Z",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			"O",
			"merged",
		],
		[
			"T",
			"merged",
		],
		[
			"T",
			"merged",
		],
		[
			0,
			"clear",
		],
		[
			0,
			"clear",
		],
		[
			"I",
			"merged",
		],
	],
]
import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import App from '../client/containers/App';
import * as redux from 'react-redux'
import Enzyme, { shallow, render, mount } from 'enzyme';
import { renderHook } from '@testing-library/react-hooks'
import { act } from 'react-dom/test-utils';
import toJson from 'enzyme-to-json';
import Adapter from 'enzyme-adapter-react-16';
import * as propComponents from '../client/components/propComponents';
import * as tetrominos from '../client/helpers/tetrominos';
import { usePlayer } from '../client/hooks/usePlayer';
import { useStage } from '../client/hooks/useStage'
import Tetris from '../client/components/Tetris';
import { useInterval } from '../client/hooks/useInterval';
import { useGameStatus } from '../client/hooks/useGameStatus';
Enzyme.configure({ adapter: new Adapter() })
describe("Testing Tetris hooks", () => {
	const clearStage = Array.from(Array(gameHelpers.STAGE_HEIGHT), () => (new Array(gameHelpers.STAGE_WIDTH).fill([0, 'clear'])))
	let player = { pos: { x: 0, y: 0 }, tetromino: tetrominos.TETROMINOS['J'].shape, collided: false };
	const container = mount(<Tetris />);
	// it("Should start game", () =>{
	// 	const spy = jest.spyOn(container, 'startGame')
	// 	container.find("#startButton button").simulate('click')
	// 	expect(spy).toBeCalledTimes(1);
	// })
	it("should test use Interval", () => {
		const callback = () => {
			console.log("yess")
			return 'yes'
		}
		// const { result } = renderHook(() => useInterval(callback, 0));
		let results;
		let stage;
		let rowsCleared = 0;
		let player;
		function UsePlayerWrapper() {
			player = usePlayer();
			return null
		}
		mount(<UsePlayerWrapper />)
		function StageHookWrapper() {
			stage = useStage(player[0], player[3]);
			return null
		}
		mount(<StageHookWrapper />)
		function HookWrapper() {
			results = useGameStatus(stage[3]);
			return null
		}
		mount(<HookWrapper />);
		let [score, setScore, rows, setRows, level, setLevel] = results;
		act(() => {
			stage[1](newStage)
		})
		
		expect(score).toEqual(0)

	})
})

// row = [
// 	[
// 		"O",
// 		"merged",
// 	],
// 	[
// 		"O",
// 		"merged",
// 	],
// 	[
// 		"L",
// 		"merged",
// 	],
// 	[
// 		"Z",
// 		"merged",
// 	],
// 	[
// 		"Z",
// 		"merged",
// 	],
// 	[
// 		"O",
// 		"merged",
// 	],
// 	[
// 		"O",
// 		"merged",
// 	],
// 	[
// 		"L",
// 		"merged",
// 	],
// 	[
// 		"T",
// 		"merged",
// 	],
// 	[
// 		"Z",
// 		"merged",
// 	],
// 	[
// 		"Z",
// 		"merged",
// 	],
// 	[
// 		"I",
// 		"merged",
// 	],
// ]
